# ----------------------------------------------------------------------
# CONFIGURA√á√ÉO DO PROGRAMA DE AN√ÅLISE DE DADOS
# ----------------------------------------------------------------------
# Este arquivo cont√©m as configura√ß√µes do programa para carregar, processar
# e visualizar os dados de batidas. Ele √© dividido em se√ß√µes que configuram
# colunas do Excel, par√¢metros de an√°lise, sliders, exporta√ß√£o e visualiza√ß√£o.
# ----------------------------------------------------------------------

# Se√ß√£o que mapeia as colunas do arquivo Excel para o DataFrame
excel_columns:
  date: "DATA" # Coluna com a data
  cod_batida: "COD. BATIDA" # Coluna com o c√≥digo da batida
  nome: "NOME" # Coluna com o nome da dieta/atividade
  alimento: "ALIMENTO" # Coluna com o nome do alimento
  tipo: "TIPO" # Coluna com o tipo de alimento (para aplicar os pesos relativos)
  previsto: "PREVISTO (KG)" # Coluna com a quantidade prevista (primeira inst√¢ncia)
  previsto_dup: "PREVISTO (KG).1" # Coluna duplicada de quantidade prevista
  realizado: "REALIZADO (KG)" # Coluna com a quantidade realizada (primeira inst√¢ncia)
  realizado_dup: "REALIZADO (KG).1" # Coluna duplicada de quantidade realizada
  diferenca_percentual: "DIFEREN√áA (%)" # Coluna com a diferen√ßa percentual entre o previsto e o realizado
  operator: "OPERADOR" # Coluna com o operador respons√°vel
  motorista: "MOTORISTA" # Coluna com o motorista

# ----------------------------------------------------------------------
# CONFIGURA√á√ÉO DOS PAR√ÇMETROS DE AN√ÅLISE
# ----------------------------------------------------------------------
analysis:
  tolerance_threshold: 3 # Limite de toler√¢ncia em % para a an√°lise de diferen√ßas
  outlier_threshold: 1.5 # Limite para definir outliers (em desvio interquartil)
  skip_rows: 2 # N√∫mero de linhas a serem puladas ao carregar o arquivo Excel
  remove_first_column: true # Indica se a primeira coluna do Excel deve ser removida (geralmente √≠ndice)
  columns_to_remove: ["BALAN√áA"] # Coluna a ser removida em fun√ß√£o de estar vazia (n√£o conter dados)
  top_deviation_limit: 6  # N√∫mero de alimentos a serem listados com os maiores desvios

  # Limites dos intervalos de varia√ß√£o das diferen√ßas percentuais
statistics:
  interval_limits:
    low_1: 3 # Limite inferior do primeiro intervalo (%)
    high_1: 5 # Limite superior do primeiro intervalo (%)
    low_2: 5 # Limite inferior do segundo intervalo (%)
    high_2: 7 # Limite superior do segundo intervalo (%)

# ----------------------------------------------------------------------
# CONFIGURA√á√ÉO DAS COLUNAS NUM√âRICAS
# ----------------------------------------------------------------------
numeric_columns:
  - "PREVISTO (KG)"
  - "PREVISTO (KG).1"
  - "REALIZADO (KG)"
  - "REALIZADO (KG).1"
  - "DIFEREN√áA (KG)"
  - "DIFEREN√áA (%)"
  - "CUSTO"
  - "CUSTO_KG"

# ----------------------------------------------------------------------
# CONFIGURA√á√ÉO DOS SLIDERS DE PESOS RELATIVOS
# ----------------------------------------------------------------------
slider:
  min_value: 0.5 # Valor m√≠nimo permitido para os sliders
  max_value: 2.5 # Valor m√°ximo permitido para os sliders
  default_value: 1.0 # Valor padr√£o para os sliders
  step: 0.1 # Incremento de ajuste para os sliders (precis√£o)

# ----------------------------------------------------------------------
# CONFIGURA√á√ÉO DA M√âDIA PONDERADA (C√ÅLCULOS)
# ----------------------------------------------------------------------
weighted_average:
  previsto_column: "PREVISTO (KG)" # Coluna principal de valor previsto
  realizado_column: "REALIZADO (KG)" # Coluna principal de valor realizado
  diferenca_percentual_column: "DIFEREN√áA (%)" # Coluna de diferen√ßa percentual
  pesos_relativos_column: "TIPO" # Coluna usada para os pesos relativos
  peso_multiplicador: true # Se True, multiplica o peso pelo valor previsto
  calculo:
    fator_suavizacao: 3.0 # Fator para suaviza√ß√£o de extremos
    peso_desvio: 0.3 # Peso dado ao desvio normalizado
    min_std: 0.5 # M√≠nimo desvio padr√£o para evitar divis√£o por zero

# ----------------------------------------------------------------------
# CONFIGURA√á√ÉO DA INTERFACE DO USU√ÅRIO
# ----------------------------------------------------------------------
ui:
  page_title: "An√°lise de Dados de Confinamento - Histograma de M√©dia Ponderada" # T√≠tulo da p√°gina na interface web
  layout: "wide" # Layout da p√°gina (wide, centered, etc.)
  file_uploader:
    label: "Escolha o arquivo Excel (.xlsx)" # Texto de instru√ß√£o para o upload do arquivo Excel
    allowed_types: ["xlsx"] # Tipos de arquivo permitidos para upload
  analysis_config_header: "Configura√ß√µes:" # Cabe√ßalho da se√ß√£o de configura√ß√£o
  food_weights_subheader: "pesos relativos" # Texto dos sliders
  date_input:
    label: "Selecione o per√≠odo:" # Texto de instru√ß√£o para sele√ß√£o de datas
  multiselect:
    food_label: "Selecione os Alimentos:" # Texto de instru√ß√£o para selecionar alimentos
    diet_label: "Selecione as Dietas:" # Texto de instru√ß√£o para selecionar dietas
    operator_label: "Selecione os Operadores:" # Texto de instru√ß√£o para selecionar operadores
    default_text: "Todos" # Texto padr√£o
  date_selection:
    type_label: "Selecione o tipo de filtro de data:"
    single_date_label: "data √∫nica:"
    date_range_label: "intervalo de datas:"
  remove_outliers:
    label: "Remover outliers do histograma" # Texto de instru√ß√£o para remover outliers
    help: "Remover valores extremos que podem distorcer a an√°lise." # Texto de ajuda sobre outliers
  generate_button: "Gerar" # Texto do bot√£o de gera√ß√£o de resultados
  results_header: "Resultados da an√°lise - conformidade das dietas" # T√≠tulo da se√ß√£o de resultados
  statistics_title: "estat√≠sticas principais" # T√≠tulo da se√ß√£o de estat√≠sticas
  food_weights_subheader: "pesos relativos"
  top_deviation_header: "maiores desvios"
  top_deviation_columns:
    alimento: "Alimento"
    desvio_absoluto: "Desvio (Ton)"
  downloads_header: "downloads"
  download_statistics_label: "estat√≠sticas (CSV)"
  download_histogram_label: "histograma (PNG)"
  download_processed_label: "dados processados (Excel)"
  outliers_removed_message: "*** outliers foram removidos ***" # Mensagem ao remover outliers
  conditional_formatting:
    colors:
      green: "00FF00" # Cor verde para valores entre 0 e low_1
      red_light: "FF9999" # Cor vermelho claro para valores entre low_1 e high_1
      red_intense: "FF0000" # Cor vermelho intenso para valores entre low_2 e high_2
      black: "000000" # Cor preta para valores acima de high_2
      white_font: "FFFFFF" # Cor da fonte branca para valores acima de high_2
  filter_feedback:
    sidebar_title: "### Filtros Ativos"
    reset_button_label: "üîÑ Limpar Filtros"
    warning_message: "‚ö†Ô∏è Os filtros selecionados n√£o retornaram resultados"
    info_message: "‚ÑπÔ∏è Filtros ativos: {n_filtrados:,} de {n_total:,} registros ({reducao:.1f}% redu√ß√£o)"

# ----------------------------------------------------------------------
# CONFIGURA√á√ÉO DA VISUALIZA√á√ÉO DO HISTOGRAMA
# ----------------------------------------------------------------------
visualization:
  histogram_figsize: [12, 8] # Tamanho do histograma (figura) em polegadas
  histogram_title: "Distribui√ß√£o da M√©dia Ponderada da Diferen√ßa Percentual - Dietas" # T√≠tulo do histograma
  x_label: "m√©dia ponderada da diferen√ßa (%)" # R√≥tulo do eixo X
  y_label: "n¬∫ de batidas" # R√≥tulo do eixo Y
  color_threshold: 3 # Limite de cor para destacar barras espec√≠ficas
  grid_style:
    axis: "y" # Eixo da grade (pode ser x ou y)
    linestyle: "--" # Estilo das linhas da grade (tracejado)
    linewidth: 0.7 # Espessura das linhas da grade
  vertical_line:
    color: "green" # Cor da linha vertical no histograma
    linestyle: "--" # Estilo da linha vertical
    linewidth: 2 # Espessura da linha vertical
    label: "toler√¢ncia m√°xima" # Texto da legenda da linha vertical

  # Configura√ß√£o da legenda
  legend:
    location: "upper right" # Localiza√ß√£o da legenda no gr√°fico
    fontsize: 8 # Tamanho da fonte da legenda
    frameon: true # Exibir borda ao redor da legenda
    facecolor: "lightgreen" # Cor de fundo da legenda
    edgecolor: "black" # Cor da borda da legenda
    fancybox: true # Bordas arredondadas na caixa da legenda
    framealpha: 0.5 # Transpar√™ncia da legenda
    bbox_to_anchor: [0.905, 0.80] # Posi√ß√£o exata da legenda no gr√°fico

  weights_table:
    position: [0.9, 0.69] # Posi√ß√£o da tabela de pesos no gr√°fico
    fontsize: 8 # Tamanho da fonte da tabela de pesos
    facecolor: "lightgrey" # Cor de fundo da tabela de pesos
    alpha: 0.5 # Transpar√™ncia da tabela de pesos
    boxstyle: "round,pad=0.5" # Estilo da caixa ao redor da tabela de pesos

  footer:
    fontsize: 10 # Tamanho da fonte do rodap√© do gr√°fico
    texts:
      period_text: "Per√≠odo analisado: {start_date} a {end_date}" # Texto para o per√≠odo analisado
      total_text: "Total de batidas: {total_batidas}" # Texto para o total de batidas
      generated_text: "Gerado em: {generated_time} (Hor√°rio de Bras√≠lia)" # Texto para a data de gera√ß√£o
    positions:
      period_position: [0.5, 0.01] # Posi√ß√£o do texto de per√≠odo
      total_position: [0.01, 0.01] # Posi√ß√£o do texto total de batidas
      generated_position: [0.99, 0.01] # Posi√ß√£o do texto da data de gera√ß√£o
    alignments:
      period_alignment: "center" # Alinhamento do texto de per√≠odo
      total_alignment: "left" # Alinhamento do texto total de batidas
      generated_alignment: "right" # Alinhamento do texto da data de gera√ß√£o

  subplot_adjust:
    left: 0.05 # Ajuste da margem esquerda do gr√°fico
    right: 0.95 # Espa√ßo para a tabela de pesos
    bottom: 0.1 # Ajuste da margem inferior
    top: 0.9 # Ajuste da margem superior

# ----------------------------------------------------------------------
# CONFIGURA√á√ÉO DE EXPORTA√á√ÉO
# ----------------------------------------------------------------------
export:
  histogram:
    format: "png" # Formato do arquivo exportado (imagem do histograma)
    dpi: 300 # Resolu√ß√£o da imagem exportada
  statistics:
    format: "csv" # Formato do arquivo exportado para as estat√≠sticas

# ----------------------------------------------------------------------
# CONFIGURA√á√ÉO DE TIMEZONE
# ----------------------------------------------------------------------
timezone: "America/Sao_Paulo" # Defini√ß√£o do fuso hor√°rio para os dados
